<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, orientation=portrait">
    <title>PONDER</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            background-color: black;
        }

        #websiteContainer {
            width: 100vw;
            height: 100vh;
            max-width: 100vh;
            max-height: 100vw;
            display: flex;
            justify-content: center;
            align-items: center;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: black;
        }

        #heartContainer {
            position: absolute;
            top: 10px;
            left: 22px;
            font-size: 24px;
            display: flex;
        }

        .heart {
            width: 24px;
            height: 24px;
            margin-right: 2px;
        }

        .heart svg {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <iframe id="websiteContainer" src="" frameborder="0"></iframe>
    <div id="heartContainer"></div>

    <!-- SVG Definitions -->
    <svg id="filledHeart" viewBox="0 0 595.3 841.9" style="display:none">
        <path fill="#E52421" d="M-2116.1,88V46h-42V4h-42h-42v42h-42v42h-42h-42V46h-42V4h-42h-42v42h-42v42h-42v42v42v42h42v42h42v42h42v42h42
	v42h42v42h42h42v-42h42v-42h42v-42h42v-42h42v-42h42v-42v-42V88H-2116.1z M-2116.1,172h-42v42h-42v42h-42v42h-42v42h-42h-42v-42h-42
	v-42h-42v-42h-42v-42h-42v-42h42V88h42h42v42h42v42h42h42v-42h42V88h42h42v42h42V172z"/>
    </svg>
    <svg id="emptyHeart" viewBox="0 0 595.3 841.9" style="display:none">
        <path fill="#E52421" d="M-1012.4,88V46h-42V4h-42h-42v42h-42v42h-42h-42V46h-42V4h-42h-42v42h-42v42h-42v42v42v42h42v42h42v42h42v42h42
	v42h42v42h42h42v-42h42v-42h42v-42h42v-42h42v-42h42v-42v-42V88H-1012.4z"/>
    </svg>

    <script>
        let LIVES = parseInt(localStorage.getItem('LIVES')) || 9;
        let LVL = parseInt(localStorage.getItem('LVL')) || 1;

        function updateHearts() {
            const container = document.getElementById('heartContainer');
            container.innerHTML = '';

            const filledHeartSVG = document.getElementById('filledHeart').outerHTML;
            const emptyHeartSVG = document.getElementById('emptyHeart').outerHTML;

            for (let i = 0; i < 9; i++) {
                const heart = document.createElement('div');
                heart.className = 'heart';
                heart.innerHTML = i < LIVES ? filledHeartSVG : emptyHeartSVG;
                container.appendChild(heart);
            }
        }

        if (LVL === 1) {
            document.getElementById('websiteContainer').src = "https://framellarchive.github.io/LVL1/";
        } else if (LVL === 2) {
            document.getElementById('websiteContainer').src = "https://framellarchive.github.io/LVL2/";
        }

        window.addEventListener('message', function(event) {
            if (event.data.startsWith('SETLVL')) {
                const level = parseInt(event.data.slice(6), 10);
                if (!isNaN(level)) {
                    LVL = level;
                    localStorage.setItem('LVL', LVL);
                }
            }
            if (event.data === 'navigateToLVL2') {
                document.getElementById('websiteContainer').src = "https://framellarchive.github.io/LVL2/";
            }
            if (event.data === 'navigateToLVL1') {
                document.getElementById('websiteContainer').src = "https://framellarchive.github.io/LVL1/";
            }
            if (event.data === 'PLUSLIFE') {
                LIVES++;
                if (LIVES > 9) {
                    LIVES = 9;
                }
                localStorage.setItem('LIVES', LIVES);
                updateHearts();
            }
            if (event.data === 'LOSELIFE') {
                LIVES--;
                if (LIVES < 0) {
                    LIVES = 0;
                }
                localStorage.setItem('LIVES', LIVES);
                updateHearts();
            }
        });

        updateHearts();
    </script>
</body>
</html>
